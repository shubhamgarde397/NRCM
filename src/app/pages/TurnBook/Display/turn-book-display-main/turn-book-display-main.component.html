<div class="well container">

  <br />
  <div class="row">
    <div class="col-lg-12">
      <!-- DATE-->
      <div class="form-group row">
        <div class="col-sm-5">
          <select class="form-control" id="partyType" [(ngModel)]="trucknoid" (change)="findOption()" id="truckNoone">
            <option *ngFor="let i of displayoptions;let j = index;" value={{i.value}}>{{i.viewvalue}}</option>
          </select>
        </div>
        <div class="col-sm-3"
          *ngIf="(buttonOption!=='1' ) && (buttonOption!=='6') && (buttonOption!=='7')&& (buttonOption!=='8')">
          <input type="date" class="form-control" [(ngModel)]="dynDate">
        </div>
        <div class="col-sm-3" *ngIf="buttonOption==='4'">
          <input type="date" class="form-control" [(ngModel)]="dynDate2">
        </div>

        <div class="col-sm-3" *ngIf="buttonOption==='8'">
          <select class="form-control" [(ngModel)]="selectedmy">
            <option *ngFor="let i of buttons;let j = index;" value={{i.value}}>{{i.viewValue}}</option>
          </select>
        </div>

      </div>
      <div class="row">
        <div class="col-sm-4">
          <!-- <input type="text" [(ngModel)]="dataTruck" (input)="newData()"> -->
        </div>
        <div class="col-sm-4">
          <button mat-raised-button (click)="find()" class="btn btn-primary" style="width: 100%;margin-top: 10px;"
            [disabled]="buttonOption==='7'">
            {{buttonValue}}
          </button>
        </div>
        <div class="col-sm-4" *ngIf="role==1||role==2" (click)="getAdminAccess()">Admin Access</div>
      </div>
      <!--DATE -->

      <h3>{{todaysDate}}</h3>

      <table class="table" style="width:100%" align="center"
        *ngIf="(buttonOption!=='6')&&(buttonOption!=='7')&&(buttonOption!=='8')">
        <thead align="center" style="font-weight: bold">
          <tr class=table-header>
            <th>Srno</th>
            <th>Date</th>
            <th>Loading Date</th>
            <th>Truck No</th>
            <th>Place</th>
            <th>Party</th>
            <th>LRNO</th>
            <th *ngIf="role==1||role==2">PN</th>
            <th *ngIf="role==1||role==2">Delete</th>
            <th>Cancel</th>
            <th>Edit</th>
            <th *ngIf="adminAccess">TNO</th>
          </tr>
        </thead>

        <tbody align="center">
          <tr *ngFor="let i of turnbooklist;let j = index"
            [ngStyle]="{'color': i.ownerDetails[0]===undefined ||i.ownerDetails[0].pan===''||i.ownerDetails[0].accountDetails.length===0 ? 'red' : 'black' }">
            <td>{{j+1}}</td>
            <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}</td>
            <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
            <td *ngIf="i.ownerDetails[0]!==undefined">{{i.ownerDetails[0].truckno}}

              <button class="btn btn-danger" type="button" (click)="edit(i.ownerDetails[0])"
                style="width: 30%;font-size: 11px;" *ngIf="i.ownerDetails[0].pan===''">
                PAN
              </button>

              <button class="btn btn-warning" type="button" (click)="edit(i.ownerDetails[0])"
                style="width: 30%;font-size: 11px;" *ngIf="i.ownerDetails[0].accountDetails.length===0">
                Account
              </button>

            </td>
            <td *ngIf="i.ownerDetails[0]===undefined"></td>
            <td *ngIf="i.villageDetails[0]!==undefined">{{i.villageDetails[0].village_name}}</td>
            <td *ngIf="i.villageDetails[0]==undefined"></td>
            <td>{{i.partyType}}</td>
            <td>{{i.lrno}}</td>
            <td *ngIf="role==1||role==2">{{i.partyDetails[0].name}}</td>
            <td>
              <button mat-raised-button (click)="delete(i,j)" *ngIf="role==1||role==2"
                class="btn-danger btn-sm btn-just-icon">
                <i class="material-icons">delete_forever</i>
              </button>
            </td>
            <td>
              <button mat-raised-button type="button" (click)="showDatabyid2(i,j)"
                class="btn-warning btn-sm btn-just-icon">
                <i class="material-icons">delete</i>
              </button>
            </td>
            <td>
              <button mat-raised-button type="button" (click)="showDatabyid(i,j)"
                class="btn-primary btn-sm btn-just-icon">
                <i class="material-icons">edit</i>
              </button>
            </td>
            <td *ngIf="adminAccess">
              <button mat-raised-button type="button" (click)="showDatabyid3(i,j)"
                class="btn-primary btn-sm btn-just-icon">
                <i class="material-icons">edit</i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="row" *ngIf="buttonOption==='6'">

        <div class="col-sm-3">
          <input type="date" class="form-control" [(ngModel)]="dateFilter" (input)="filter('date')"
            [disabled]="truckFilterB">
        </div>
        <div class="col-sm-3">
          <input type="text" class="form-control" [(ngModel)]="truckFilter" [disabled]="dateFilterB">
        </div>
        <div class="col-sm-2">
          <button mat-raised-button type="button" (click)="filter('truck')">Filter</button>
        </div>

        <div class="col-sm-2">
          <button mat-raised-button type="button" (click)="filter('skipDate')">Skip Date</button>
        </div>
        <div class="col-sm-2">
          <button mat-raised-button type="button" (click)="filter('')">Erase Filters</button>
        </div>
      </div>
      <div *ngIf="saveToCheckArrayBoolean">

        <table class="table" style="width:100%" align="center" *ngIf="buttonOption==='6'">
          <thead align="center" style="font-weight: bold">
            <tr class=table-header>
              <th>Srno</th>
              <th>Date</th>
              <th>Loading Date</th>
              <th>Truck No</th>
              <th>Place</th>
              <th>Party</th>
              <th>LRNO</th>
              <th>Select</th>
            </tr>
          </thead>

          <tbody align="center">
            <tr *ngFor="let i of turnbooklist;let j = index" [ngStyle]="{'color': i.checker===0 ? 'red' : 'black' }">
              <td>{{j+1}}</td>
              <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}</td>
              <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
              <td>{{i.ownerDetails[0].truckno}}</td>
              <td>{{i.villageDetails[0].village_name}}</td>
              <td>{{i.partyType}}</td>
              <td>{{i.lrno}}</td>
              <td *ngIf='i.checker===0'>
                <button mat-raised-button type="button" (click)="addToCheckArray(i,j,1)"
                  class="btn-primary btn-sm btn-just-icon">
                  <i class="material-icons">add</i>
                </button>
              </td>
              <td *ngIf='i.checker===1'>
                <button mat-raised-button type="button" (click)="addToCheckArray(i,j,0)"
                  class="btn-danger btn-sm btn-just-icon" disabled>
                  <i class="material-icons">remove</i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <div *ngIf="buttonOption==='6'">
          <button mat-raised-button type="button" (click)="saveToCheckArray()" class="btn-danger btn-sm btn-just-icon">
            <i class="material-icons">add</i>
          </button>
        </div>
        <div *ngIf="buttonOption==='6'">
          <button mat-raised-button type="button" (click)="moveToFinalStep()" class="btn-success btn-sm btn-just-icon"
            *ngIf="balanceHireArrray.length>0">
            <i class="material-icons">arrow_forward</i>
          </button>
        </div>
      </div>
      <div *ngIf="!saveToCheckArrayBoolean">
        <div *ngIf="finalCheckDone">
          <div *ngFor="let k of balanceHireArrray;let kk=index;">
            <table>
              <thead>
                <tr>
                  <th>Srno</th>
                  <th>Loading Date</th>
                  <th>Truck No</th>
                  <th>Cancel</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let ii of k;let jj=index;">
                  <td>{{jj+1}}</td>
                  <td>{{ii.loadingDate|date:'dd-MM-yyyy'}}</td>
                  <td>{{ii.ownerDetails[0].truckno}}</td>
                  <td><button mat-raised-button type="button" (click)="addToCheckArray2(kk,jj,0)"
                      class="btn-danger btn-sm btn-just-icon">
                      <i class="material-icons">remove</i>
                    </button></td>
                </tr>
              </tbody>
            </table>
          </div>
          <button mat-raised-button type="button" (click)="moveToFinalStepReset()"
            class="btn-warning btn-sm btn-just-icon">
            <i class="material-icons">autorenew</i>
          </button>
          <button mat-raised-button type="button" (click)="moveToFinalStep2()" class="btn-success btn-sm btn-just-icon">
            <i class="material-icons">arrow_forward</i>
          </button>
        </div>

        <div *ngIf="!finalCheckDone">
          <div *ngFor="let k of balanceHireArrray;let kk=index;">
            <table>
              <thead>
                <tr>
                  <th>Srno</th>
                  <th>Loading Date</th>
                  <th>Truck No</th>
                  <th>Balance</th>
                  <th>Pageno</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let ii of k;let jj=index;">
                  <td>{{jj+1}}</td>
                  <td>{{ii.loadingDate|date:'dd-MM-yyyy'}}</td>
                  <td>{{ii.ownerDetails[0].truckno}}</td>
                  <td><input type="text" placeholder="Balance" id="balance_{{kk}}_{{jj}}">
                  </td>
                  <td><input type="text" placeholder="Page no" id="pageno_{{kk}}_{{jj}}">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <button mat-raised-button type="button" (click)="moveToFinalStep2()" class="btn-warning btn-sm btn-just-icon">
            <i class="material-icons">arrow_back</i>
          </button>
          <button mat-raised-button type="button" (click)="setBalPage()" class="btn-success btn-sm btn-just-icon">
            <i class="material-icons">arrow_forward</i>
          </button>

        </div>
      </div>

      <div class="col-sm-12" *ngIf="buttonOption==='7'">
        <div class="row" *ngIf="pochDiv">
          <div class="col-sm-2" *ngFor="let i of buttons">
            <button mat-raised-button class="btn btn-warning" style="margin:1vh;"
              (click)="find(i.value)">{{i.viewValue}}</button>
          </div>
        </div>
        <div *ngIf="!pochDiv" class="row">
          <div class="row">
            <div class="col-sm-2">
              <input type="text" class="form-control" [(ngModel)]="truckFilter2">
            </div>
            <div class="col-sm-2">
              <button mat-raised-button type="button" class="btn btn-warning" (click)="filter2('truck')">
                Filter</button>
            </div>
            <div class="col-sm-2">
              <button mat-raised-button type="button" class="btn btn-warning" (click)="filter2('')">Erase
                Filters</button>
            </div>

            <div class="col-sm-2">
              <button mat-raised-button type="button" class="btn btn-danger" (click)="filter2('back')">Back</button>
            </div>
          </div>

          <table class="table" style="width:100%" align="center" *ngIf="buttonOption==='7'">
            <thead align="center" style="font-weight: bold">
              <tr class=table-header>
                <th>Srno</th>
                <th>Date</th>
                <th>Loading Date</th>
                <th>Truck No</th>
                <th>Place</th>
                <th>Party</th>
                <th>LRNO</th>
                <th>Select</th>
              </tr>
            </thead>

            <tbody align="center">
              <tr *ngFor="let i of turnbooklist;let j = index">
                <td>{{j+1}}</td>
                <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}</td>
                <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
                <td>{{i.ownerDetails[0].truckno}}</td>
                <td>{{i.villageDetails[0].village_name}}</td>
                <td>{{i.partyType}}</td>
                <td>{{i.lrno}}</td>
                <td *ngIf='i.checker===0'>
                  <button mat-raised-button type="button" (click)="uncheckPoch(i,j)"
                    class="btn-primary btn-sm btn-just-icon">
                    <i class="material-icons">add</i>
                  </button>
                </td>
                <td *ngIf='i.checker===1'>
                  <button mat-raised-button type="button" class="btn-danger btn-sm btn-just-icon" disabled>
                    <i class="material-icons">remove</i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="col-sm-12" *ngIf="!showbuttonOption8" style="font-weight: bold;font-size: 8vh;">
        {{show8Msg}}
      </div>
      <div class="col-sm-12" *ngIf="showbuttonOption8">
        <form [formGroup]="myFormGroup" (ngSubmit)="change(myFormGroup)">
          <!-- loadingDate-->
          <div class="form-group row">

            <div class="col-xs-2">
              <label for="loadingDate"> Loading Date</label>
            </div>

            <div class="col-xs-3">
              <select id="loadingDateDynamic" class="form-control " formControlName="loadingDateDynamic"
                (change)="getOtherDetails()">
                <option *ngFor="let i of turnbooklist;let j = index;" value={{i.loadingDate}}>{{i.loadingDate}}</option>
              </select>
            </div>


          </div>
          <!--loadingDate -->



          <!--Truckno-->
          <div class="form-group row" *ngIf="showbuttonOption82">

            <div class="col-xs-2">
              <label for="truckNo"> Truckno </label>
            </div>

            <div class="col-xs-3">
              <select id="" class="form-control" formControlName="truckno" (change)="getOtherDetails2()">
                <option *ngFor="let i of turnbooklist_trucks;let j = index;" value={{i.truckno}}>{{i.truckno}}
                </option>
              </select>
            </div>

          </div>
          <!--Truckno-->

          <!-- turnbookDate-->
          <div class="form-group row" *ngIf="showbuttonOption821">

            <div class="col-xs-2">
              <label for="turnbookDate"> Turn Book Date</label>
            </div>

            <div class="col-xs-3">
              <input type="date" id="turnbookDate" class="form-control" formControlName="turnbookDate" disabled>
            </div>


          </div>
          <!--turnbookDate -->

          <!--Place-->
          <div class="form-group row" *ngIf="showbuttonOption821">
            <div class="col-xs-2">
              <label for="place"> Place </label>
            </div>
            <div class="col-xs-3">

              <select id="place" class="form-control" formControlName="place" (change)="setPlaceName()">
                <option disabled value="{{placeid}}" selected>{{place}}</option>
                <option *ngFor="let own of villagelist;let j = index;" value="{{own._id}}+{{j}}">{{own.village_name}}
                </option>
              </select>
            </div>
            <div class="col-xs-1">
              <div [hidden]="myFormGroup.controls.place.valid">
                <font color="red">
                  <span class="glyphicon glyphicon-remove"></span>
                </font>
              </div>
            </div>
          </div>
          <!--place-->

          <!--NOP-->
          <div class="form-group row" *ngIf="showbuttonOption821">

            <div class="col-xs-2">
              <label for="partyName"> Name of Party </label>
            </div>
            <div class="col-xs-3">
              <select id="partyName" class="form-control " formControlName="partyName" (change)="setPartyName()">
                <option selected disabled value={{partyid}}>{{party}}</option>
                <option *ngFor="let i of parties;let j = index;" value={{i._id}}+{{j}}>{{i.name}}</option>
              </select>
            </div>

            <div class="col-xs-1">
              <div [hidden]="myFormGroup.controls.partyName.valid">
                <font color="red">
                  <span class="glyphicon glyphicon-remove"></span>
                </font>
              </div>
            </div>
          </div>
          <!--NOP-->
          <!--LRNO-->
          <div class="form-group row" *ngIf="showbuttonOption821">

            <div class="col-xs-2">
              <label for="lrno"> LRNO </label>
            </div>

            <div class="col-xs-3">
              <input type="number" id="lrno" class="form-control" formControlName="lrno">
            </div>

            <div class="col-xs-1">
              <div [hidden]="myFormGroup.controls.lrno.valid">
                <font color="red">
                  <span class="glyphicon glyphicon-remove"></span>
                </font>
              </div>
            </div>

          </div>
          <!--LRNO-->


          <!--Hire Amount-->
          <div class="form-group row" *ngIf="showbuttonOption821">

            <div class="col-xs-2">
              <label for="hamt"> Hire Amount </label>
            </div>

            <div class="col-xs-3">
              <input type="number" class="form-control" formControlName="hamt" />

            </div>

            <div class="col-xs-1">
              <div [hidden]="myFormGroup.controls.hamt.valid">
                <font color="red">
                  <span class="glyphicon glyphicon-remove"></span>
                </font>
              </div>
            </div>

          </div>
          <!--HireAmount-->

          <div class="row" *ngIf="showbuttonOption82">
            <div class="form-group" class="col-xs-2"></div>
            <div class="form-group" class="col-xs-1">
              <button type="submit" class="btn btn-primary" [disabled]='!myFormGroup.valid'>
                <i class="material-icons">send</i>
              </button>
            </div>
          </div>

        </form>
      </div>


    </div>
  </div>
</div>
<div *ngIf="show">

  <!-- <router-outlet></router-outlet> -->
</div>