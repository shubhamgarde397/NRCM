<div class="well" style="width:100%;" *ngIf="!show">

  <div class="form-group row">
    <div class="col-sm-5">
      <select class="form-control" [(ngModel)]="displayType" (change)="findOption()">
        <option *ngFor="let i of displayoptions;let j = index;" value={{i.value}}>{{i.viewvalue}}</option>
      </select>
    </div>
  </div>


  <div class="row" *ngIf="buttonOption=='2'">
    <span style="font-weight: bold;">{{createdDate|date:'dd-MM-yyyy'}}</span>
    <div *ngIf="yeardiv">
      <div class="col-sm-2" *ngFor="let i of years">
        <button mat-raised-button class="btn btn-warning" style="margin:1vh;" (click)="find2(i,'year')">{{i}}</button>
      </div>
    </div>
    <div *ngIf="monthdiv">
      <div class="col-sm-2" *ngFor="let i of actualMonths">
        <button mat-raised-button class="btn btn-warning"
          [ngStyle]="{'background-color': i.print ? '#5CB85C' : '#D9534F'}"
          (click)="find2(i,'month')">{{i.name}}</button>
      </div>
      <div class="col-sm-3">
        <button class="btn btn-danger" style="width:100%" (click)="back('year')">Back</button>
      </div>
    </div>
    <div *ngIf="daydiv">
      <div class="col-sm-3" *ngFor="let i of dayData" style="margin-bottom: 2vh;">
        <button class="btn btn-warning" style="width:100%" [ngStyle]="{'background-color': i.color}"
          (click)="find2(i,'day')" [disabled]="i.data=='NA'">{{i._id}} : {{i.data}}</button>
      </div>
      <div class="col-sm-3">
        <button class="btn btn-danger" style="width:100%" (click)="back('month')">Back</button>
      </div>
    </div>
  </div>


  <div class="row" *ngIf="((buttonOption=='1')||(buttonOption=='2'))">
    <div class="row" *ngIf="printInfo">

      <div class="form-group col-xs-1" align="center">
        <input type="date" [(ngModel)]="selectedDate" *ngIf="role==1||role==2">
      </div>

      <div class="form-group col-xs-1" align="center">
        <button class="btn btn-warning" (click)="find()" *ngIf="role==1||role==2">Find</button>
      </div>
      <div class="form-group col-xs-1" align="center">
        <button class="btn btn-danger" (click)="download(true)" *ngIf="role==1||role==2">PDF</button>
      </div>
      <div class="form-group col-xs-1" align="center">
        <button class="btn btn-danger" (click)="download(false)" *ngIf="role==1||role==2">PDF-Mail</button>
      </div>
      <div class="form-group col-xs-1" align="center">
        <button class="btn btn-danger" (click)="adminAccess()" *ngIf="role==1||role==2">Admin</button>
      </div>
      <div class="form-group col-xs-1" align="center">
        <button class="btn btn-danger" (click)="printUpdate()" *ngIf="role==1||role==2"
          [ngStyle]="{'background-color': !printed ? 'red' : 'black' }" [disabled]="printed">Print</button>
      </div>
    </div>

    <div style="text-align: center">
      <h3>{{selectedDate|date:'dd-MM-yyyy'}}</h3>
      <table class="table" style="width:100%" align="center">

        <thead class="table-header">
          <tr>
            <th>Srno</th>
            <th>Today Date</th>
            <th>Date</th>
            <th>Truckno</th>
            <th>Amount</th>
            <th>PgNo</th>
            <th>Comments</th>
            <th>AccountNo-IFSC</th>
            <th>Account Name</th>
            <th *ngIf="!admin">Delete</th>
            <th *ngIf="(role==1||role==2)&&(!admin)">Edit</th>
            <th *ngIf="admin">Delete Admin</th>
            <th *ngIf="(role==1||role==2)&&(admin)">Edit Admin</th>
          </tr>
        </thead>


        <tbody>
          <tr *ngFor="let i of balanceDate;let j = index"
            [ngStyle]="{'color': i.comments==='cancel' ? 'red' : 'black' }">
            <td (click)="tempDelete(j)">{{j+1}}</td>
            <td>{{i.todayDate|date:'dd-MM-yyyy'}}</td>
            <td>
              <ul *ngFor="let k of i.truckData">
                <li>{{k.date|date:'dd-MM-yyyy'}}</li>
              </ul>
            </td>

            <td>
              <ul *ngFor="let k of i.truckData">
                <li>{{k.truckno}}</li>
              </ul>
            </td>

            <td>
              <ul *ngFor="let k of i.truckData">
                <li>{{k.amount}}</li>
              </ul>
            </td>
            <td>
              <ul *ngFor="let k of i.truckData">
                <li>{{k.pageno}}</li>
              </ul>
            </td>
            <td>{{i.commentToTruck}}
              <br>
              <button class="btn btn-warning" (click)="updateComments(i)">Comments</button>
              <button class="btn btn-warning" (click)="clearComments(i)">Clear Comments</button>
            </td>
            <td>{{i.accountNumber}}-{{i.ifsc}}</td>
            <td>{{i.accountName}}</td>
            <td *ngIf="(i.comments==='')&&(!admin)">
              <button mat-raised-button (click)="deleteBH(i)" class="btn-danger btn-sm btn-just-icon">
                <i class="material-icons">delete_forever</i>
              </button>
            </td>
            <td *ngIf="(i.comments==='cancel')&&(!admin)">
              <button mat-raised-button type="button" (click)="deleteBH(i)" class="btn-primary btn-sm btn-just-icon">
                <i class="material-icons">add</i>
              </button>
            </td>
            <td *ngIf="(role==1||role==2)&&(!admin)">
              <button mat-raised-button type="button" (click)="showDatabyid(i,j)"
                class="btn-primary btn-sm btn-just-icon" *ngIf="(role==1||role==2)&&(!admin)">
                <i class="material-icons">edit</i>
              </button>
            </td>
            <td *ngIf="(role==1||role==2)&&(admin)">
              <button mat-raised-button type="button" (click)="deleteBHComplete(i,j)"
                class="btn-danger btn-sm btn-just-icon" *ngIf="(role==1||role==2)&&(admin)">
                <i class="material-icons">delete_forever</i>
              </button>
            </td>
            <td>
              <button mat-raised-button (click)="showDatabyidEditForm(i,j)" *ngIf="(role==1||role==2)&&(admin)"
                class="btn-primary btn-sm btn-just-icon">
                <i class="material-icons">edit</i>
              </button>
            </td>

          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-sm-3" *ngIf="daydiv">
      <button class="btn btn-danger" style="width:100%" (click)="back('day')">Back</button>
    </div>
  </div>
</div>

<div class="well" *ngIf="buttonOption=='3'">  
<div class="row">
  <h3>NR Trucks</h3>
  <button mat-raised-button (click)="refresh('3')" class="btn-warning btn-sm btn-just-icon">
    <i class="material-icons">reset</i>
  </button>
  <div class="row">
    <div class="col-sm-4">
      Given Date : 
      <input type="date" [(ngModel)]='givenDate'>
    </div>
  </div>
  <table class="table" style="width:100%" align="center">
    <thead class="table-header">
      <tr>
        <th>Srno</th>
        <th>LDate</th>
        <th>TDate</th>
        <th>Truckno</th>
        <th>Party</th>
        <th>Add to Given</th>
      </tr>
    </thead>


    <tbody>
      <tr *ngFor="let i of givenTrucks;let j = index">
        <td>{{j+1}}</td>
        <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
        <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}</td>
        <td>{{i.truckno}}</td>
        <td>{{i.parties}}</td>
        <td>
          <button mat-raised-button (click)="addtoGiven(i._id,j)" class="btn-warning btn-sm btn-just-icon">
            <i class="material-icons">add</i>
          </button>
        </td>
        

      </tr>
    </tbody>
  </table>
</div>
</div>

<div class="well" *ngIf="buttonOption=='4'">  
  <div class="row">
    <h3>NR Trucks</h3>
   
      <div class="well"  *ngIf="givenPaymentTable">
      <button mat-raised-button (click)="downloadGPP()" class="btn-warning btn-sm btn-just-icon">
        <i class="material-icons">download</i>
      </button>
      <button mat-raised-button (click)="refresh('4')" class="btn-warning btn-sm btn-just-icon">
        <i class="material-icons">autorenew</i>
      </button>
    <table class="table" style="width:100%" align="center">
      <thead class="table-header">
        <tr>
          <th>Srno</th>
          <th>Loading Date</th>
          <th>Given Date</th>
          <th>Truckno</th>
          <th>Party</th>
          <th>Place</th>
          <th>Edit</th>
        </tr>
      </thead>
  
  
      <tbody>
        <tr *ngFor="let i of givenTrucksPayment;let j = index">
          <td>{{j+1}}</td>
          <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
          <td>{{i.givenDate|date:'dd-MM-yyyy'}}</td>
          <td>{{i.trucks[0].truckno}}</td>
          <td>{{i.parties[0].name}}</td>  
          <td>{{i.places[0].village_name}}</td>    
          <td>
            <button mat-raised-button (click)="showDatabyidTBEdit(i,j)" class="btn-warning btn-sm btn-just-icon">
              <i class="material-icons">edit</i>
            </button>
          </td>    
        </tr>
      </tbody>
    </table>
  </div>
    <div class="well" *ngIf="!givenPaymentTable"><h1>{{GPPMsg}}</h1></div>
  </div>
  </div>

<div *ngIf="show">
  <router-outlet></router-outlet>
</div>