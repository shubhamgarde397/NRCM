<div class="row">
  <button class="btn btn-warning" (click)="tabF(0)">Add</button>
  <button class="btn btn-warning" (click)="tabF(1)">Display</button>
  <button class="btn btn-warning" (click)="tabF(2)">Ofc Location</button>
</div>


<div class="well" *ngIf="tab==0">
  <button class="btn btn-danger" (click)="get()">Get Data</button>
  <input type="text" [(ngModel)]="qrsetter" id="qrsetter">
  <input type="date" id="datesetter">
    <table class="table table-bordered">
      <tr>
        <th>Srno</th>
        <th>Date-TNO</th>
        <th>Party Type & Name</th>
        <th>Place1/Place2</th>
        <th>Load & Ton</th>
        <th>Co & QR</th>
        <th>Rent</th>
        <th>Details</th>
        <th>Lock/Unlock</th>
      </tr>
      <tr *ngFor="let i of turnbooklist1;let j = index;">
        <td>{{j+1}}</td>
        <td>
          <input type="date" class="form-control" style="width: 50%;" id="date_{{j}}" [disabled]='i.lul==="unlock"' value={{i.loadingDate}}>

          <input type="text" list="cars" class="form-control"  style="width: 50%;" id="truckno_{{j}}" [disabled]='i.lul==="unlock"' autocomplete="off"/>
           <datalist id="cars">
            <option *ngFor="let own of trucks" value={{own.truckno}}>{{own.truckno}}</option>
           </datalist>
        </td>

        <td>
          <select class="form-control" id="pt_{{j}}"  style="width: 50%;" [disabled]='i.lul==="unlock"' (change)="setParty(j)">
            <option disabled id="">Default</option>
          <option *ngFor="let ii of pts;" value={{ii.value}}>{{ii.viewValue}}</option>
        </select>

        <select class="form-control" [disabled]='i.lul==="unlock"' id="pn_{{j}}" style="width: 50%;background-color: black;color: wheat;">
            <option disabled id="">Default</option>
            <option value={{k._id}} *ngFor="let k of i.parties2;let kki = index">{{k.name}}</option>
          </select>

      </td>



        <td>
          <select class="form-control" [disabled]='i.lul==="unlock"' id="p1_{{j}}" style="width: 50%;background-color: black;color: wheat;">
            <option disabled id="">Default</option>
            <option value={{k._id}} *ngFor="let k of villages;let kki = index">{{k.village_name}}</option>
          </select>
          <br>
          <select class="form-control" [disabled]='i.lul==="unlock"' id="p2_{{j}}" style="width: 50%;background-color: black;color: wheat;">
            <option disabled id="">Default</option>
            <option value={{k._id}} *ngFor="let k of villages;let kki = index">{{k.village_name}}</option>
          </select>
        </td>

        <td *ngIf="!i.otherbuttons"></td>
        <td *ngIf="i.otherbuttons">
          <select class="form-control"  style="width: 50%;" [disabled]='i.lul==="unlock"' id="tol_{{j}}" (change)="checkTON(j)">
          <option *ngFor="let ii of tols;" value={{ii.viewValue}}>{{ii.viewValue}}</option>
        </select>

        <br>
          <select class="form-control"  style="width: 50%;" [disabled]='i.lul==="unlock"' id="weight_{{j}}">
            <option *ngFor="let k of i.tons;let k = index;" value={{k}}>{{k}}</option>
          </select>

      </td>

        <td>
         <table border="0">
          <tr>
            <th>Co</th>
            <th>D</th>
          </tr>
          <tr *ngFor="let ii of i.contacts;let jj =index;">
            <td><input [disabled]='i.lul==="unlock"' type="text" id="co_{{j}}{{jj}}"></td>
            <td><button class="btn btn-danger" [disabled]='i.lul==="unlock"' (click)="delete(j,'c',jj)">D</button></td>
          </tr>
         </table>
         <button [disabled]='i.lul==="unlock"' class="btn btn-warning" (click)="addRow('c',j)">A</button>

         <hr>


         <table border="0" *ngIf="i.otherbuttons">
           <tr>
             <th>QR</th>
             <th>D</th>
           </tr>
           <tr *ngFor="let ii of i.qrs;let jj =index;">
             <td><input [disabled]='i.lul==="unlock"' type="text" id="qr_{{j}}{{jj}}" value={{ii.qr}}></td>
             <td><button class="btn btn-danger" [disabled]='i.lul==="unlock"' (click)="delete(j,'q',jj)">D</button></td>
           </tr>
          </table>
          <button [disabled]='i.lul==="unlock"' class="btn btn-warning" (click)="addRow('q',j)">A</button>

        </td>
        
        <td>
          Rent : <input type="number" class="form-control" style="width: 50%;" id="rent_{{j}}" [disabled]='i.lul==="unlock"' value={{i.rent}}>
          Extra :<input type="number" class="form-control" style="width: 50%;" id="extra_{{j}}" [disabled]='i.lul==="unlock"'>
          Extra Msg :<input type="text" class="form-control" style="width: 50%;" id="extraMsg_{{j}}" [disabled]='i.lul==="unlock"'>
          Adv :<input type="number" class="form-control" style="width: 50%;" id="adv_{{j}}" (change)="billAmount(j)" [disabled]='i.lul==="unlock"'>
          Bal :<input type="number" class="form-control" style="width: 50%;" id="bal_{{j}}" [disabled]='i.lul==="unlock"' value=2950>
        </td>

        <td>
          Bill : <input type="number" class="form-control" style="width: 50%;" id="bill_{{j}}" [disabled]='i.lul==="unlock"' value={{i.bill}}>
          Coolie : <input type="number" class="form-control" style="width: 50%;" id="coolie_{{j}}" [disabled]='i.lul==="unlock"'>
          Less : <input type="number" class="form-control" style="width: 50%;" id="less_{{j}}" [disabled]='i.lul==="unlock"'>
          Cash : <input type="number" class="form-control" style="width: 50%;" id="cash_{{j}}" [disabled]='i.lul==="unlock"'>
        </td>

        <td>
          <button class="btn btn-danger" (click)="lul(j,i.lul)">{{i.lul}}</button>
          <button class="btn btn-danger" [disabled]='i.lul==="unlock"' (click)="delete(j,'r')">D</button>
        </td>
      </tr>
    </table>
    <button class="btn btn-primary" (click)="addRow('r',j)">Row</button>
  <button class="btn btn-success" [disabled]="!submitButton" (click)="save()">Save</button>
  <button class="btn btn-danger" [disabled]="submitButton" (click)="lul()">Force Enable</button>
  <button class="btn btn-warning" (click)="lulAll()">Force Lock</button>

</div>


<div class="well" *ngIf="tab==1">
  <button class="btn btn-danger" (click)="get2()">Get Data</button>

  <table class="table table-bordered">
    <tr>
      <th>Srno</th>
      <th>Date</th>
      <th>TruckNo-Contact</th>
      <th>Party-Contact-Load</th>
      <th>Place</th>
      <th>QR</th>
      <th>Code</th>
    </tr>
    <tr *ngFor="let i of pmts;let j = index;">
      <td>{{j+1}}</td>
      <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
      <td>{{i.truckno}}<br>{{i.contacttb[0]}}</td>
      <td>{{i.partyName}}<br>{{i.contactp}}<br>{{i.typeOfLoad}}</td>
      <td>{{i.destination}}-{{i.destination2}}</td>
      <td>
        <ul>
          <li *ngFor="let k of i.qr">{{k}}</li>
        </ul>
      </td>
      <td><button class="btn btn-warning" (click)="qrCoder(i.qrcode)">Send</button></td>
      
    </tr>
  </table>
<button class="btn btn-danger" (click)="partyOk()">Set All</button>
</div>



<div class="well" *ngIf="tab==2">
  <button class="btn btn-danger" (click)="get3()">Get Data</button>
  <button class="btn btn-danger" (click)="setTrue3()">Set All True</button>

  <table class="table table-bordered">
    <tr>
      <th>Srno</th>
      <th>Date</th>
      <th>TruckNo-Contact</th>
      <th>Code</th>
    </tr>
    <tr *ngFor="let i of pmts3;let j = index;">
      <td>{{j+1}}</td>
      <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
      <td>{{i.truckno}}<br>{{i.contacttb}}</td>
      <td><button class="btn btn-warning" (click)="LocationSender(i)">Send</button></td>
      
    </tr>
  </table>

</div>