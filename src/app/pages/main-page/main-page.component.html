<div>

  <nav class="navbar navbar-inverse">
    <div class="container row">
      <div class="navbar-header">
        <a class="navbar-brand" routerLink="NRCM_HOME"><b>Nitin Roadways FAST</b></a>
      </div>
    </div>

  </nav>


  <div class="row">
    <div class="col-sm-1">
        <button class="btn btn-info" (click)="getWhichType('1')">Rent</button>
    </div>
    <div class="col-sm-1">
      <button class="btn btn-info" (click)="getWhichType('2')">Truck Data</button>
  </div>
  <div class="col-sm-1">
    <button class="btn btn-info" (click)="getWhichType('3')">By Load</button>
</div>
<div class="col-sm-1">
  <button class="btn btn-info" (click)="getWhichType('4')">VillageParty</button>
</div>
<div class="col-sm-1">
  <button class="btn btn-info" (click)="getWhichType('5')">Tentative</button>
</div>
<div class="col-sm-1">
  <button class="btn btn-info" (click)="getWhichType('6')">Generate Random</button>
</div>
<div class="col-sm-1">
  <button class="btn btn-info" (click)="getTpt()">All Envelopes</button>
</div>
</div>

<div *ngIf="whichType==='1'">
    <div class="well">
    
        <table class="table" style="width:100%" align="center"  *ngIf="tableDate">
    
            <thead>
                <tr class="table-header">
                    <th>Srno</th>
                    <th>Location</th>
                    <th>Value</th>
                    <th>Update</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let i of data;let j = index">
                    <td>{{j+1}}</td>
                    <td>{{i._id}}</td>
                    <td><ul *ngFor="let j of i.data">
                        <li>{{j}}</li>
                    </ul></td>
                    
                    
                    <td><button class="btn btn-danger" (click)="update(i)"><i class="material-icons" >send</i></button></td>        
                </tr>
            </tbody>
        </table>
    </div>

    <div class="well">
      <form [formGroup]="myFormGroup" (ngSubmit)="store(myFormGroup)" submitted=true
        enctype="multipart/form data" action="/">
    
        <div class="form-group row">
          <div class="col-xs-3">
            <select id="location" class="form-control" formControlName="location">
              <option selected>Select Place</option>
              <option *ngFor="let own of villagenamelist">{{own.village_name}}</option>
            </select>
          </div>
          <div class="col-xs-1" style="cursor: pointer; margin-top: 3vh;">
            <i class="material-icons" (click)="getVillages()">autorenew</i>
          </div>
        </div>  

        <div class="form-group row">
          <div class="col-xs-3">
           Tons :  <input type="number" id="value" class="form-control" formControlName="ton">
          </div>
        </div>

        <div class="form-group row">
          <div class="col-xs-3">
            <select id="typeOfLoad" class="form-control" formControlName="typeOfLoad">
              <option selected>Select Type</option>
              <option value="Pipe">Pipe</option>
              <option value="Fittings">Fittings</option>
            </select>
          </div>
        </div>  
    
        <div class="form-group row">
          <div class="col-xs-3">
            <input type="number" id="value" class="form-control" formControlName="value" placeholder="Value">
          </div>
        </div>
    
                
    
        <div class="row">
          <div class="form-group" class="col-xs-2"></div>
          <div class="form-group" class="col-xs-1">
            <button type="submit" class="btn btn-primary" [disabled]='!myFormGroup.valid'>
              <i class="material-icons">send</i>
            </button>
          </div>
    
    
        </div>
      </form>
    
    
    
    </div>
    </div>

    <div *ngIf="whichType==='2'">
      <div class="well">
      <div class="row">
        <div class="col-sm-3">
          <input type="text" class="form-control col-sm-3" [(ngModel)]='truckVar' placeholder="Truck No">
        </div>
        <div class="col-sm-3">
          <select class="form-control" *ngIf="wala11" id="partyType" [(ngModel)]="trucknoid11" (change)="find11UniqueTruck()" id="truckNoone11">
            <option>Default</option>
            <option *ngFor="let i of unique11turnbooklist;let j = index;" value={{i}}>{{i}}</option>
          </select>
        </div>
        </div>
        <div class="row">
          <div class="col-sm-2">
            <button class="btn btn-warning col-sm-3"  style="width: 50%;" (click)="find('11')">Truck No</button>
            
          </div>
          <div class="col-sm-2">
            <button class="btn btn-warning col-sm-3"  style="width: 50%;" (click)="find('11new')">LRNO</button></div>
            
          
        </div>

          
              <div class="col-sm-12">

            <table class="table" style="width:100%" align="center" *ngIf="byTruckName">
                  <thead align="center" style="font-weight: bold">
                    <tr class=table-header>
                      <th>Srno</th>
                      <th>Entry-Loading</th>
                      <th>TruckNo</th>
                      <th>Type-Party-Place</th>
                      <th>LRNO</th>
                      <th>Amount</th>
                      <th>Poch : Amt : Acc</th>
                      <th>Payment Details</th>
                    </tr>
                  </thead>
                  <tbody align="center">
                    <tr *ngFor="let i of turn11;let j = index">
                      <td>{{j+1}}</td>
                      <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}<br>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
                      <td>{{i.truckName['truckno']}}</td>
                      <td>{{i.partyType}}-{{i.partyName.shortName}}-{{i.placeName.shortName}}<br><span *ngIf="i.placeName2!==undefined">{{i.placeName2.shortName}}</span>-{{i.typeOfLoad}}</td>
                      <td>{{i.lrno}}</td>
                      <td>{{i.hamt}}<br>{{i.rent}}</td>
                      <td [ngStyle]="{'background-color': i.colors[0]}">{{i.pochDate|date:'dd-MM-yyyy'}} <br>{{i.pochAmount}}:{{i.truckName.accountDetails[0].accountName}}<br>{{i.truckName.accountDetails[0].accountNumber}}</td>
                      <td [ngStyle]="{'background-color': i.colors[1]}">
                        {{i.actualPaymentDate|date:'dd-MM-yyyy'}}<br>{{i.actualPaymentAmount}}<br>{{i.truckName['pan']}}</td>
                    </tr>
                  </tbody>
                </table>
          </div>
         

      </div>
      </div>

      <div *ngIf="whichType==='3'">
        <div class="well">
        <div class="row">

          <div class="col-sm-3">
             <select class="form-control" [(ngModel)]="rc">
                <option>Default</option>
                <option value="AP">AP</option>
                <option value="MH">MH</option>
                <option value="KA">KA</option>
                <option value="TN">TN</option>
              </select>
          </div>

         <div class="col-sm-3">
          <select class="form-control" [(ngModel)]="load">
             <option>Default</option>
             <option value="Pipe">Pipe</option>
             <option value="Fittings">Fittings</option>
             <option value="Other">Other</option>
           </select>
       </div>

          <div class="col-sm-3">
            <button class="btn btn-warning col-sm-3" (click)="find4()">Find</button>
          </div>

        </div>
            
        <div class="col-sm-12">
  
              <table class="table" style="width:100%" align="center" *ngIf="table4">
                    <thead align="center" style="font-weight: bold">
                      <tr class=table-header>
                        <th>Srno</th>
                        <th>TruckNo</th>
                        <th>Type-Party-Place</th>
                        <th>LRNO</th>
                        <th>Amount</th>
                        <th>Poch : Amt : Acc</th>
                        <th>Payment Details</th>
                      </tr>
                    </thead>
                    <tbody align="center">
                      <tr *ngFor="let i of turn11;let j = index">
                        <td>{{j+1}}<br><i class="material-icons" *ngIf="i.complete" style="color: green;">
                          done
                          </i><i class="material-icons" *ngIf="!i.complete" style="color: red;">
                            close
                            </i></td>
                        <td>{{i.turnbookDate|date:'dd-MM-yyyy'}}<br>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
                        <td>{{i.partyType}}-{{i.partyName.shortName}}-{{i.placeName.shortName}}<br><span *ngIf="i.placeName2!==undefined">{{i.placeName2.shortName}}</span>-{{i.typeOfLoad}}</td>
                        <td>{{i.lrno}}</td>
                        <td>{{i.hamt}}<br>{{i.rent}}</td>
                        <td [ngStyle]="{'background-color': i.colors[0]}">{{i.pochDate|date:'dd-MM-yyyy'}} <br>{{i.pochAmount}}:{{i.truckName.accountDetails[0].accountName}}<br>{{i.truckName.accountDetails[0].accountNumber}}</td>
                        <td [ngStyle]="{'background-color': i.colors[1]}">{{i.actualPaymentDate|date:'dd-MM-yyyy'}}<br>{{i.actualPaymentAmount}}<br>{{i.statusOfPoch}}</td>
                      </tr>
                    </tbody>
                  </table>
            </div>
           
  
        </div>
        </div>

        <div *ngIf="whichType==='4'">
          <div class="well">
            <div class="form-group row">
              <div class="col-xs-2">
                <label>Place</label>
                <select class="form-control" [(ngModel)]="placeidto" (change)="getDA()">
                  <option selected>Select Place</option>
                  <option *ngFor="let i of places" value={{i._id}}>{{i.village_name}}</option>
                </select>
              </div>
              <div class="col-xs-1" style="cursor: pointer; margin-top: 3vh;">
                <i class="material-icons" (click)="getVillages()">autorenew</i>
              </div>
            

              <div class="col-xs-2">
                <label>Party</label>
                <select class="form-control" [(ngModel)]="partyidto" (change)="getPA()">
                  <option selected>Select Place</option>
                  <option *ngFor="let i of parties" value={{i._id}}>{{i.name}}</option>
                </select>
              </div>
              <div class="col-xs-1" style="cursor: pointer; margin-top: 3vh;">
                <i class="material-icons" (click)="getparties()">autorenew</i>
              </div>

              <div class="col-xs-3">
                <label>From</label>
                <input type="date" class="form-control" [(ngModel)]="fromDate">
              </div>

              <div class="col-xs-3">
                <label>To</label>
                <input type="date" class="form-control" [(ngModel)]="toDate">
              </div>
                


            </div>
            <div class="row">
              <div class="col-sm-4">
                  <button class="btn btn-danger" (click)="getVPData()">Get</button>
                </div>
            </div>
              

            <div class="col-sm-12">

              <table class="table" style="width:100%" align="center">
                    <thead align="center" style="font-weight: bold">
                      <tr class=table-header>
                        <th>Srno</th>
                        <th>Loading</th>
                        <th>LRNO</th>
                        <th>Amount</th>
                        <th>Poch : Amt : Acc</th>
                        <th>Payment Details</th>
                      </tr>
                    </thead>
                    <tbody align="center">
                      <tr *ngFor="let i of turnbooklist;let j = index">
                        <td>{{j+1}}</td>
                        <td>{{i.loadingDate|date:'dd-MM-yyyy'}}=>{{i.datetruck}}</td>
                        <td>{{i.lrno}}</td>
                        <td>{{i.hamt}}<br>{{i.rent}}</td>
                        <td>{{i.pochDate|date:'dd-MM-yyyy'}} <br>{{i.pochAmount}}</td>
                        <td>{{i.actualPaymentDate|date:'dd-MM-yyyy'}}<br>{{i.actualPaymentAmount}}</td>
                      </tr>
                    </tbody>
                  </table>
            </div>
             
    
          </div>
          </div>

          <div *ngIf="whichType==='5'">
            <div class="well">
            <div class="row">

    
              <div class="col-sm-3">
                <button class="btn btn-warning col-sm-3" (click)="find6()">Find</button>
              </div>
              <div class="col-sm-3">
                <button class="btn btn-warning col-sm-3" (click)="show(0)">0</button>
              </div>
              <div class="col-sm-3">
                <button class="btn btn-warning col-sm-3" (click)="show(1)">1</button>
              </div>
              <div class="col-sm-3">
                <button class="btn btn-warning col-sm-3" (click)="show(2950)">2950</button>
              </div>
    
            </div>
                
            <div class="col-sm-12">
      
                  <table class="table" style="width:100%" align="center">
                        <thead align="center" style="font-weight: bold">
                          <tr class=table-header>
                            <th>Srno</th>
                            <th>Date</th>
                            <th>TruckNo</th>
                            <th>Party</th>
                            <th>Place</th>
                            <th>Amount</th>
                          </tr>
                        </thead>
                        <tbody align="center">
                          <tr *ngFor="let i of data6;let j = index">
                            <td>{{j+1}}</td>
                            <td>{{i.loadingDate|date:'dd-MM-yyyy'}}</td>
                            <td>{{i.truckno}}</td>
                            <td>{{i.party}}</td>
                            <td>{{i.place}}</td>
                            <td><input type="number" id="tb_{{j}}" value={{i.tentativeBalance}}></td>
                          </tr>
                        </tbody>
                      </table>
                </div>
               
                <button mat-raised-button type="button" (click)="setTB()" class="btn-success btn-sm btn-just-icon">
                  <i class="material-icons">arrow_forward</i>
                </button>
            </div>
            </div>

            <div *ngIf="whichType==='6'">
             
          
              <div class="well">
                <form [formGroup]="myFormGroupR" (ngSubmit)="generate(myFormGroupR)" submitted=true
                  enctype="multipart/form data" action="/">
              
                 
          
                  <div class="form-group row">
                    <div class="col-xs-3">
                     From :  <input type="number" id="value" class="form-control" formControlName="from">
                    </div>
                  </div>
          
                  
              
                  <div class="form-group row">
                    <div class="col-xs-3">
                     To :  <input type="number" id="value" class="form-control" formControlName="to">
                    </div>
                  </div>
              
                          
              
                  <div class="row">
                    <div class="form-group" class="col-xs-2"></div>
                    <div class="form-group" class="col-xs-1">
                      <button type="submit" class="btn btn-primary" [disabled]='!myFormGroupR.valid'>
                        <i class="material-icons">send</i>
                      </button>
                    </div>
              
              
                  </div>
                </form>
              
              
              
              </div>
              <div class="well">
                <ul *ngFor="let i of randomarray;">
                  <li>{{i}}</li>
                </ul>
              </div>
              </div>

            </div>